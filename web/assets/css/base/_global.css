/* assets/css/base/_global.css (VERSÃO iOS CORRIGIDA) */

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');

/* === iOS SAFE AREA SUPPORT === */
:root {
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
    /* Altura do bottom nav para cálculos */
    --bottom-nav-height: 60px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

/* HTML - Fundo sólido que vai até as bordas */
html {
    height: 100%;
    width: 100%;
    /* ✅ FUNDO SÓLIDO - sempre visível, sem gradientes durante transição */
    background: #121212 !important;
    overscroll-behavior: contain;
    /* iOS: permitir scroll nativo */
    overflow: hidden;
    /* ✅ Sem transições no background */
    transition: none !important;
}

/* BODY - NÃO USAR position: fixed (causa barra cinza no iOS) */
body {
    width: 100%;
    height: 100%;
    min-height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    /* ✅ FUNDO SÓLIDO - sem gradientes durante transição */
    background: #121212 !important;
    background-image: 
        radial-gradient(circle at 90% 90%, rgba(60, 60, 60, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 10% 10%, rgba(50, 50, 50, 0.25) 0%, transparent 50%) !important;
    color: var(--text-primary);
    font-family: 'Montserrat', sans-serif; 
    -webkit-font-smoothing: antialiased;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    /* ✅ GARANTIR TOUCH FUNCIONA - permitir pan-y para scroll */
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
    /* iOS: Garantir que o body preencha toda a tela */
    position: relative;
    /* ✅ Sem transições no background */
    transition: none !important;
}

/* ✅ Durante transição, background 100% sólido */
body.page-transitioning,
html.page-transitioning {
    background: #121212 !important;
    background-image: none !important;
}

/* Classes de container dentro dos fragments */
.app-container, .container {
    width: 100%;
    max-width: 480px;
    margin: 0 auto;
    padding: 16px;
    /* Safe area no topo */
    padding-top: calc(16px + env(safe-area-inset-top, 0px));
    /* Espaço pro bottom nav (altura do nav + safe area + margem extra) */
    padding-bottom: calc(var(--bottom-nav-height) + env(safe-area-inset-bottom, 0px) + 20px);
    background: transparent;
    /* iOS: min-height para conteúdo pequeno */
    min-height: 100%;
    /* ✅ GARANTIR TOUCH FUNCIONA */
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
    pointer-events: auto !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

.app-container::-webkit-scrollbar, .container::-webkit-scrollbar { 
    display: none; 
}

/* REGRAS ESPECÍFICAS PARA iOS - Previne scroll horizontal */
* {
    overscroll-behavior-x: none;
}

/* ✅ EXCEÇÃO: CARROSSEL DE SUGESTÕES PRECISA DE OVERSCROLL HORIZONTAL */
.suggestions-carousel,
.carousel-wrapper {
    overscroll-behavior-x: auto !important;
}

/* Previne que qualquer elemento cause scroll horizontal */
body, html, .app-container, .container {
    max-width: 100vw;
    overflow-x: hidden;
}

/* ✅ FORÇA O CONTAINER A PERMITIR QUE O CARROSSEL SAIA */
.app-container:has(.card-suggestions),
.container:has(.card-suggestions),
.dashboard-grid:has(.card-suggestions) {
    overflow-x: visible !important;
    contain: none !important;
}

/* Fallback para navegadores sem :has() */
@supports not selector(:has(*)) {
    .app-container,
    .dashboard-grid {
        overflow-x: visible !important;
    }
}

/* ✅ GARANTE QUE O CARD E SEUS FILHOS POSSAM SAIR DO CONTAINER */
.card-suggestions,
.card-suggestions *,
.card-suggestions .carousel-wrapper,
.card-suggestions .suggestions-carousel {
    contain: none !important;
    isolation: auto !important;
}

/* iOS: Garantir que elementos fixed usem safe-area corretamente */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
    body {
        /* Preencher a área da home indicator com a cor de fundo */
        padding-bottom: 0;
    }
}



