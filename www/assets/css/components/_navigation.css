/* assets/css/components/_navigation.css */
/* BOTTOM NAV - iOS Glassmorphism Style */

/* ============================================
   CONTAINER DO BOTTOM NAV
   ============================================ */
#bottom-nav-container {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important; /* Abaixo do modal (z-index: 99999) */
    
    /* === GLASSMORPHISM === */
    background: rgba(25, 25, 25, 0.75) !important;
    -webkit-backdrop-filter: saturate(180%) blur(25px) !important;
    backdrop-filter: saturate(180%) blur(25px) !important;
    
    /* Borda sutil no topo */
    border-top: 0.5px solid rgba(255, 255, 255, 0.1) !important;
    
    /* Sombra suave */
    box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.25) !important;
    
    /* ✅ COLADO NA BORDA - Safe area apenas no conteúdo interno */
    padding: 0 !important;
    margin: 0 !important;
    top: auto !important;
    
    /* ✅ FORÇAR FIXO - SEM QUALQUER MOVIMENTO */
    transform: none !important;
    -webkit-transform: none !important;
    translate: none !important;
    will-change: auto !important;
    
        /* ✅ TRANSIÇÃO SUAVE APENAS QUANDO HIDDEN POR MODAL */
    transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1) !important;
    animation: none !important;
    
    /* ✅ FORÇAR RENDERIZAÇÃO ESTÁTICA */
    contain: layout style paint !important;
}

/* ✅ PERMITIR TRANSIÇÃO SUAVE QUANDO HIDDEN POR MODAL */
#bottom-nav-container.smooth-transition {
    transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1) !important;
}

/* ✅ QUANDO MODAL ESTÁ ABERTO - ESCONDER BOTTOM NAV */
body.modal-open #bottom-nav-container,
body:has(.modal-overlay.visible) #bottom-nav-container,
.modal-overlay.visible ~ * #bottom-nav-container,
.modal-overlay.visible + * #bottom-nav-container {
    transform: translateY(100%) !important;
    -webkit-transform: translateY(100%) !important;
    transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1) !important;
    z-index: 999 !important; /* Abaixo do modal */
}

/* ✅ DURANTE TRANSIÇÕES - GARANTIR 100% FIXO */
body.page-transitioning #bottom-nav-container,
html.page-transitioning #bottom-nav-container,
body.page-loading #bottom-nav-container,
html.page-loading #bottom-nav-container,
#bottom-nav-container {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
    -webkit-transform: none !important;
    translate: none !important;
    transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1) !important;
    animation: none !important;
    will-change: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    top: auto !important;
    /* ✅ FORÇAR LAYOUT ESTÁTICO */
    contain: layout style paint !important;
    /* ✅ PREVENIR QUALQUER MOVIMENTO */
    pointer-events: auto !important;
}

/* ============================================
   BARRA DE NAVEGAÇÃO INTERNA
   ============================================ */
.bottom-nav {
    position: relative;
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    display: flex;
    justify-content: space-around;
    align-items: center;
    
    /* Altura fixa + safe area no padding - GARANTIR QUE NÃO CORTE */
    min-height: 50px;
    height: auto;
    padding: 6px 16px;
    padding-bottom: calc(6px + env(safe-area-inset-bottom, 0px));
    
    /* Background transparente */
    background: transparent;
    
    /* ✅ GARANTIR QUE NÃO CORTE */
    overflow: visible !important;
    box-sizing: border-box !important;
}

/* ============================================
   ITENS DE NAVEGAÇÃO
   ============================================ */
.nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: rgba(255, 255, 255, 0.45);
    height: 100%;
    min-height: 44px; /* iOS minimum touch target */
    min-width: 44px;
    padding: 8px 0;
    
    /* CRÍTICO: Garantir que receba toques */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    
    /* Transição suave */
    transition: color 0.15s ease;
}

/* Ícone */
.nav-item i {
    font-size: 1.4rem;
    line-height: 1;
    pointer-events: none; /* Deixa o parent receber o touch */
}

/* Estado Ativo - SEM GLOW */
.nav-item.active {
    color: #FF6B00;
}

/* Estado Pressionado */
.nav-item:active {
    opacity: 0.6;
}

/* ============================================
   ESTADOS ESPECIAIS
   ============================================ */

/* ✅ ESCONDER APENAS PARA AUTH PAGES - MÁXIMA PRIORIDADE */
#bottom-nav-container.hidden,
html.auth-initial #bottom-nav-container,
body.auth-mode #bottom-nav-container,
html.auth-initial #bottom-nav-container.nav-visible,
body.auth-mode #bottom-nav-container.nav-visible {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    position: fixed !important;
    bottom: -1000px !important;
    height: 0 !important;
    width: 0 !important;
    overflow: hidden !important;
}

/* ✅ GARANTIR QUE NUNCA SOME DURANTE TRANSIÇÕES */
body.page-transitioning #bottom-nav-container.hidden,
body.page-loading #bottom-nav-container.hidden {
    /* Se não for auth, mostrar mesmo com hidden */
}

/* ✅ SEMPRE VISÍVEL quando não é auth */
body:not(.auth-mode) #bottom-nav-container:not(.hidden) {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
}


/* ============================================
   RESPONSIVO
   ============================================ */
@media (max-width: 360px) {
    .nav-item i {
        font-size: 1.25rem;
    }
    
    .bottom-nav {
        padding: 5px 12px;
        height: 46px;
    }
}
